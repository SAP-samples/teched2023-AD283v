{"version":3,"file":"Sensors-dbg.controller.js","names":["Threshold","___format_util","Sensors","Controller","extend","constructor","prototype","apply","arguments","statusFilters","onInit","_onInit","ownerComp","getOwnerComponent","getSensorModel","dataLoaded","then","resourceModel","getModel","resourceBundle","getResourceBundle","MessageToast","show","getText","closeOnBrowserNavigation","bind","oErr","message","_getSensorModel","oModel","onFilterSelect","_onFilterSelect","event","_this$getView","listBinding","getView","byId","getBinding","key","getParameter","Filter","FilterOperator","LT","Warm","BT","Hot","GT","filter","onCustomerInfoPress","_onCustomerInfoPress","_this$dialog","dialog","loadFragment","name","open","err","onCustomerInfoClose","_onCustomerInfoClose","close"],"sources":["Sensors.controller.ts"],"sourcesContent":["import ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport { IconTabBar$SelectEvent } from \"sap/m/IconTabBar\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport Controller from \"sap/ui/core/mvc/Controller\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport ListBinding from \"sap/ui/model/ListBinding\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport ResourceModel from \"sap/ui/model/resource/ResourceModel\";\nimport { Threshold } from \"../format/util\";\nimport Dialog from \"sap/m/Dialog\";\n\n/**\n * @namespace keepcool.sensormanager.controller\n */\nexport default class Sensors extends Controller {\n\n    public onInit() {\n        const ownerComp = this.getOwnerComponent();\n        this.getSensorModel().dataLoaded().then(function() {\n            const resourceModel = ownerComp?.getModel(\"i18n\") as ResourceModel;\n            const resourceBundle = resourceModel.getResourceBundle() as ResourceBundle;\n            MessageToast.show(resourceBundle.getText(\"msgSensorDataLoaded\") as string, { closeOnBrowserNavigation: false });\n        }.bind(this)).catch(function(oErr: Error){\n            MessageToast.show(oErr.message, { closeOnBrowserNavigation: false });\n        });\n    }\n\n    public getSensorModel() {\n        const ownerComp = this.getOwnerComponent();\n        const oModel = ownerComp?.getModel(\"sensorModel\") as JSONModel;\n        return oModel;\n    }\n\n    private statusFilters: Filter[] = [];\n\n    onFilterSelect(event: IconTabBar$SelectEvent): void {\n\n        const listBinding = this.getView()?.byId(\"sensorsList\")?.getBinding(\"items\") as ListBinding;\n        const key = (event.getParameter(\"key\") as string);\n\n        if (key === \"Cold\") {\n            this.statusFilters = [new Filter(\"temperature\", FilterOperator.LT, Threshold.Warm, false)];\n        } else if (key === \"Warm\") {\n            this.statusFilters = [new Filter(\"temperature\", FilterOperator.BT, Threshold.Warm, Threshold.Hot)];\n        } else if (key === \"Hot\") {\n            this.statusFilters = [new Filter(\"temperature\", FilterOperator.GT, Threshold.Hot, false)];\n        } else {\n            this.statusFilters = [];\n        }\n\n        listBinding.filter(this.statusFilters);\n    }\n\n    private dialog: Promise<Dialog>;\n\n    onCustomerInfoPress(): void {\n        this.dialog ??= this.loadFragment({\n            name: \"keepcool.sensormanager.view.CustomerDialog\"\n        }) as Promise<Dialog>;\n    \n        this.dialog.then((dialog) => dialog.open())\n            .catch((err: Error) => MessageToast.show(err.message));\n    }\n\n    onCustomerInfoClose(): void {\n        this.dialog.then(function(dialog){\n            dialog.close();\n        }).catch(function(err: Error){\n            MessageToast.show(err.message);\n        });\n    }\n    \n}"],"mappings":"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"}