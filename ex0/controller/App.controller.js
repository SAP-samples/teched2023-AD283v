sap.ui.define(["sap/ui/Device","sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel"],(e,t,s,i,r)=>{"use strict";return t.extend("sap.ui.demo.todo.controller.App",{onInit(){this.aSearchFilters=[];this.aTabFilters=[];this.getView().setModel(new r({isMobile:e.browser.mobile,filterText:undefined}),"view")},addTodo(){const e=this.getView().getModel();const t=e.getProperty("/todos").map(e=>Object.assign({},e));t.push({title:e.getProperty("/newTodo"),completed:false});e.setProperty("/todos",t);e.setProperty("/newTodo","")},clearCompleted(){const e=this.getView().getModel();const t=e.getProperty("/todos").map(e=>Object.assign({},e));let s=t.length;while(s--){const e=t[s];if(e.completed){t.splice(s,1)}}e.setProperty("/todos",t)},updateItemsLeftCount(){const e=this.getView().getModel();const t=e.getProperty("/todos")||[];const s=t.filter(e=>e.completed!==true).length;e.setProperty("/itemsLeftCount",s)},onSearch(e){const t=this.getView().getModel();this.aSearchFilters=[];this.sSearchQuery=e.getSource().getValue();if(this.sSearchQuery&&this.sSearchQuery.length>0){t.setProperty("/itemsRemovable",false);const e=new s("title",i.Contains,this.sSearchQuery);this.aSearchFilters.push(e)}else{t.setProperty("/itemsRemovable",true)}this._applyListFilters()},onFilter(e){this.aTabFilters=[];this.sFilterKey=e.getParameter("item").getKey();switch(this.sFilterKey){case"active":this.aTabFilters.push(new s("completed",i.EQ,false));break;case"completed":this.aTabFilters.push(new s("completed",i.EQ,true));break;case"all":default:}this._applyListFilters()},_applyListFilters(){const e=this.byId("todoList");const t=e.getBinding("items");t.filter(this.aSearchFilters.concat(this.aTabFilters),"todos");let s;if(this.sFilterKey&&this.sFilterKey!=="all"){if(this.sFilterKey==="active"){s="ACTIVE_ITEMS"}else{s="COMPLETED_ITEMS"}if(this.sSearchQuery){s+="_CONTAINING"}}else if(this.sSearchQuery){s="ITEMS_CONTAINING"}let i;if(s){const e=this.getView().getModel("i18n").getResourceBundle();i=e.getText(s,[this.sSearchQuery])}this.getView().getModel("view").setProperty("/filterText",i)}})});
//# sourceMappingURL=App.controller.js.map